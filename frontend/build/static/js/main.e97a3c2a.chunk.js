(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{167:function(e,t,n){e.exports=n(278)},172:function(e,t,n){},174:function(e,t,n){},278:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(24),l=n.n(i),c=(n(172),n(11)),o=n(73),s=(n(174),n(3)),u=Object(a.createContext)({restaurantName:"",token:null,loggedIn:!1}),d=n(18),m=function(e){var t=e.currentTypes,n=e.setTypes,a=e.foodTypes;return r.a.createElement("div",{style:{flexDirection:"row",padding:8}},a.map(function(e){return r.a.createElement(s.f,{key:e,onClick:function(){t.includes(e)?(t.splice(t.indexOf(e),1),n(Object(d.a)(t))):n([].concat(Object(d.a)(t),[e]))},label:e,variant:t.includes(e)?"default":"outlined",padding:4})}))},p=["Burger","Kebab","Pizza"],g=function(e){var t=e.name,n=e.latLng,a=e.types;return fetch("/restaurant/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,location:n,foodTypes:a})}).then(function(e){return e.json()})};var f={container:{flex:1,alignItems:"center",justifyContent:"center",height:!1,paddingTop:"200px",alignSelf:"center"},card:{flexDirection:"column",width:"400px"},content:{flexDirection:"column"}},v=function(){var e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],i=t[1],l=Object(a.useState)({lat:"",lng:""}),o=Object(c.a)(l,2),d=o[0],v=o[1],E=Object(a.useState)([]),y=Object(c.a)(E,2),b=y[0],O=y[1],h=d.lat,j=d.lng,x=Object(a.useContext)(u),C=Object(c.a)(x,2),k=(C[0],C[1]);return r.a.createElement("div",{style:f.container},r.a.createElement(s.b,{style:f.card},r.a.createElement(s.d,{title:"UNLABELLED for restaurants"}),r.a.createElement(s.c,{style:f.content},r.a.createElement(s.g,{placeholder:"restaurant name",value:n,onChange:function(e){return i(e.target.value)}}),r.a.createElement("div",{style:{flexDirection:"row"}},r.a.createElement(s.g,{placeholder:"lattitude",value:h,onChange:function(e){return v({lat:e.target.value,lng:j})}}),r.a.createElement(s.g,{placeholder:"longitude",value:j,onChange:function(e){return v({lat:h,lng:e.target.value})}})),r.a.createElement(m,{currentTypes:b,foodTypes:p,setTypes:O}),r.a.createElement(s.a,{onClick:function(){""===n||""===h||""===j?alert("Please enter all the fields."):g({name:n,latLng:d,types:b}).then(function(e){if(e.error)return alert(e.error),null;k({restaurant:n,token:e.token,loggedIn:!0})})}},"Register"))))},E=n(44),y=function(){return r.a.createElement("img",{src:"https://i.imgur.com/xN4UYUs.gif"})},b=n(72),O=function(e){var t=e.name,n=e.picture,a=e.deliverTime,i=e.onAccept,l=e.onDecline,c=e.toppings;return r.a.createElement(s.b,{style:{flexDirection:"column"}},r.a.createElement(s.e,{component:"img",alt:"Contemplative Reptile",height:"140px",image:n,title:"Contemplative Reptile"}),r.a.createElement(s.c,{style:{flexDirection:"column",flex:1,alignItems:"center"}},r.a.createElement("div",{style:{fontSize:23,paddingBottom:8}},t),r.a.createElement("div",{style:{paddingBottom:8}},"Delivery ",a),r.a.createElement(j,{toppings:c}),r.a.createElement("div",{style:{flexDirection:"row",flex:1,justifyContent:"flex-end"}},r.a.createElement(s.a,{style:{flex:1},onClick:i},"Accept"),r.a.createElement(s.a,{style:{flex:1},onClick:l},"Decline"))))},h=b.a.div({visible:{opacity:1},hidden:{opacity:0}}),j=function(e){return e.toppings.map(function(e){return r.a.createElement("h5",null," ",e," ")})},x=function(e){var t=e.name,n=e.picture,a=e.deliverTime,i=e.onDelivered,l=e.toppings;return r.a.createElement(s.b,{style:{flexDirection:"column"}},r.a.createElement(s.e,{component:"img",alt:"Contemplative Reptile",height:"140px",image:n,title:"Contemplative Reptile"}),r.a.createElement(s.c,{style:{flexDirection:"column",alignItems:"center",paddingBottom:"0px !important"}},r.a.createElement("div",{style:{fontSize:23,paddingBottom:8}},t),r.a.createElement("div",{style:{paddingBottom:8}},"Accepted order ",a),r.a.createElement(j,{toppings:l}),r.a.createElement(s.a,{onClick:i},"Delivered \u2714\ufe0f")))},C=function(e){var t=e.name,n=e.picture,a=e.deliverTime,i=e.onShipped,l=e.toppings;return r.a.createElement(s.b,{style:{flexDirection:"column"}},r.a.createElement(s.e,{component:"img",alt:"Contemplative Reptile",height:"140px",image:n,title:"Contemplative Reptile"}),r.a.createElement(s.c,{style:{flexDirection:"column",alignItems:"center",paddingBottom:"0px !important"}},r.a.createElement("div",{style:{fontSize:23,paddingBottom:8}},t),r.a.createElement("div",{style:{paddingBottom:8}},"Accepted order ",a),r.a.createElement(j,{toppings:l}),r.a.createElement(s.a,{onClick:i},"Shipped")))};function k(e){var t=Object(a.useState)(!1),n=Object(c.a)(t,2),i=n[0],l=n[1];return Object(a.useEffect)(function(){return l(!0),function(){l(!1)}},[]),r.a.createElement(h,{pose:i?"visible":"hidden"},r.a.createElement(C,e))}var w=new WebSocket("ws://twinone.xyz:17001/ws");var S={grid:{display:"grid",gridTemplateColumns:"200px 200px 200px",gridColumnGap:"18px",gridRowGap:"18px"},gridContainer:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center"}},D=function(){var e=Object(a.useContext)(u),t=Object(c.a)(e,2),n=t[0].restaurantName,i=t[1],l=Object(a.useState)([]),o=Object(c.a)(l,2),m=o[0],p=o[1];Object(a.useEffect)(function(){w.addEventListener("message",function(e){var t=JSON.parse(e.data);void 0!==t.foodType&&(console.log(t),function(e){p([e].concat(Object(d.a)(m)))}({picture:"https://upload.wikimedia.org/wikipedia/commons/a/a3/Eq_it-na_pizza-margherita_sep2005_sml.jpg",name:t.foodType+" Order",price:t.price,latLng:[t.lat,t.lng],toppings:t.toppings,status:"incoming"}))})},[]);var g=function(e){return function(){var t=m.filter(function(t){return t.id!==e.id});p([Object(E.a)({},e,{status:"accepted"})].concat(Object(d.a)(t))),w.send(JSON.stringify({status:"accepted"}))}},f=function(e){return function(){var t=m.filter(function(t){return t.id!==e.id});p(t),w.send(JSON.stringify({status:"delivered"}))}};return r.a.createElement("div",{style:{flex:1,alignItems:"center",justifyContent:"center",alignSelf:"center",flexDirection:"column"}},r.a.createElement("div",null,r.a.createElement("h1",{style:{fontWeight:"200"}},n)),0===m.length?r.a.createElement(y,null):r.a.createElement("div",{style:S.gridContainer},r.a.createElement("h4",null,"Orders"),r.a.createElement("div",{style:S.grid},m.map(function(e){return"accepted"===e.status?r.a.createElement(k,Object.assign({},e,{onShipped:(t=e,function(){var e=m.filter(function(e){return e.id!==t.id});p([Object(E.a)({},t,{status:"delivered"})].concat(Object(d.a)(e))),w.send(JSON.stringify({status:"shipped"}))})})):"delivered"===e.status?r.a.createElement(x,Object.assign({},e,{onDelivered:f(e)})):"done"===e.status?null:r.a.createElement(O,Object.assign({},e,{onAccept:g(e),onDecline:(n=e.id,function(){var e=m.filter(function(e){return e.id!==n});p(e),w.send(JSON.stringify({status:"rejected"}))})}));var t,n}))),r.a.createElement(s.a,{onClick:function(){i({token:null,loggedIn:!1,restaurant:""})}},"LOG OUT"))};var T=function(){var e=Object(a.useState)({token:void 0,restaurantName:null,loggedIn:!1}),t=Object(c.a)(e,2),n=t[0],i=t[1],l=Object(o.a)(["token","restaurant","loggedIn"]),s=Object(c.a)(l,2),d=s[0],m=s[1],p=function(e){var t=e.token,n=e.restaurant,a=e.loggedIn;i({token:t,restaurantName:n,loggedIn:a}),m("token",t),m("restaurant",n),m("loggedIn",a)};return Object(a.useEffect)(function(){p(d)},[]),r.a.createElement(u.Provider,{value:[n,p]},n.loggedIn?r.a.createElement(D,null):r.a.createElement(v,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[167,1,2]]]);
//# sourceMappingURL=main.e97a3c2a.chunk.js.map